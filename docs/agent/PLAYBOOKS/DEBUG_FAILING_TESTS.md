# PLAYBOOK: DEBUG FAILING TESTS

## Когда использовать
- Падающие или флаки тесты в CI/локально.

## Шаги
1. Классифицировать падение:
   - гонка/конкурентность,
   - сетевой мок,
   - изменение контракта состояния,
   - локализация.
2. Проверить `docs/lessons/INCIDENTS.md` на похожий инцидент.
3. Проверить уникальность URL в `MockURLProtocol` тестах.
4. Проверить actor-изоляцию и `@MainActor` контекст.
5. Убрать sleep-зависимости и заменить на детерминированный mock.
6. Добавить regression-тест для найденной причины.

## Чеклист PR
- Причина падения зафиксирована в тесте.
- Фикс не маскирует проблему увеличением timeout.
